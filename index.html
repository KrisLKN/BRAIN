<!DOCTYPE html>
<html lang="fr">
<head>
  <!-- META & PWA -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#0f172a" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#ffffff" media="(prefers-color-scheme: light)">
  <meta name="description" content="Second Cerveau OS -- productivité, santé, IA, objectifs, calendrier, fichiers, connaissances, humeur, météo et plus.">

  <link rel="manifest" href="manifest.webmanifest">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <title>🧠 Second Cerveau OS</title>

  <!-- Styles -->
  <link rel="preload" href="styles.css" as="style">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="app-wrapper" id="app">

  <!-- Splash / Login -->
  <div id="splash-screen" role="dialog" aria-label="Écran de démarrage">
    <div class="splash-card glass">
      <div class="logo">🧠</div>
      <h1>Second Cerveau OS</h1>
      <p>Chargement de votre univers…</p>
      <div class="login-card">
        <input id="userName" placeholder="Votre nom" aria-label="Nom d'utilisateur">
        <button id="loginBtn" class="btn primary">Entrer</button>
      </div>
    </div>
  </div>

  <!-- Barre du haut -->
  <header class="app-header glass">
    <div class="profile">
      <img src="icons/user.png" alt="Profil" id="profilePic">
      <div class="profile-meta">
        <span id="profileName">Utilisateur</span>
        <small id="profileTagline">Crée ta meilleure version</small>
      </div>
    </div>
    <div class="header-actions">
      <button id="themeToggle" class="icon" title="Thème">🌗</button>
      <button id="backupBtn" class="icon" title="Exporter">⤴︎</button>
      <button id="settingsBtn" class="icon" data-tab="settings" title="Réglages">⚙️</button>
    </div>
  </header>

  <!-- Contenu principal -->
  <main class="tab-container">
    <!-- DASHBOARD -->
    <section id="dashboard" class="tab active" aria-label="Vue d'ensemble">
      <h2 class="section-title">Vue d’ensemble</h2>
      <div class="widget-grid">
        <!-- Productivité -->
        <article class="widget glass" id="w-lastNote"><h3>📓 Dernière note</h3><p>--</p></article>
        <article class="widget glass" id="w-tasks"><h3>✅ Tâches</h3><p>0 à faire</p></article>
        <article class="widget glass" id="w-habits"><h3>🔥 Habitudes</h3><p>0 complétées</p></article>
        <article class="widget glass" id="w-focus"><h3>⏳ Focus</h3><p>00:00</p></article>

        <!-- Santé & bien-être -->
        <article class="widget glass span-2" id="w-health">
          <h3>📊 Santé</h3>
          <canvas id="healthChart" height="130" aria-label="Graphique santé"></canvas>
        </article>
        <article class="widget glass" id="w-nutrition"><h3>🥗 Nutrition</h3><p>-- kcal</p></article>
        <article class="widget glass" id="w-hydration"><h3>💧 Hydratation</h3><p>0 verres</p></article>

        <!-- Motivation & humeur -->
        <article class="widget glass" id="w-goal"><h3>🎯 Objectif</h3><p>--</p></article>
        <article class="widget glass" id="w-mood"><h3>😊 Humeur</h3><p>--</p></article>
        <article class="widget glass" id="w-quote"><h3>💬 Citation</h3><p>--</p></article>

        <!-- Contexte & infos -->
        <article class="widget glass" id="w-weather"><h3>☀️ Météo</h3><p>--</p></article>
        <article class="widget glass" id="w-news"><h3>📰 Actus</h3><p>--</p></article>
        <article class="widget glass" id="w-finance"><h3>💹 Finance</h3><p>--</p></article>
      </div>
    </section>

    <!-- JOURNAL -->
    <section id="journal" class="tab" aria-label="Journal">
      <h2 class="section-title">Journal</h2>
      <div class="card glass">
        <form id="journalForm" class="stack">
          <textarea id="journalText" placeholder="Note rapide, idée, souvenir…"></textarea>
          <div class="row">
            <button class="btn primary">Ajouter</button>
            <button type="button" id="journalVoice" class="btn">🎙️ Dictée</button>
            <button type="button" id="journalImport" class="btn">⬇︎ Import</button>
          </div>
        </form>
      </div>
      <ul id="journalList" class="list"></ul>
    </section>

    <!-- TÂCHES -->
    <section id="tasks" class="tab" aria-label="Tâches">
      <h2 class="section-title">Tâches</h2>
      <div class="card glass">
        <form id="taskForm" class="row wrap">
          <input id="taskTitle" placeholder="Nouvelle tâche">
          <input id="taskDue" type="date" title="Échéance">
          <select id="taskProject" title="Projet">
            <option value="">Projet</option><option>Perso</option><option>Travail</option><option>Études</option>
          </select>
          <button class="btn primary">Ajouter</button>
        </form>
      </div>
      <div class="kanban">
        <div class="kan-col"><h3>À faire</h3><ul id="todoList" class="list"></ul></div>
        <div class="kan-col"><h3>En cours</h3><ul id="doingList" class="list"></ul></div>
        <div class="kan-col"><h3>Fait</h3><ul id="doneList" class="list"></ul></div>
      </div>
    </section>

    <!-- HABITUDES -->
    <section id="habits" class="tab" aria-label="Habitudes">
      <h2 class="section-title">Habitudes</h2>
      <div class="card glass">
        <form id="habitForm" class="row">
          <input id="habitName" placeholder="Nom de l’habitude">
          <button class="btn primary">Ajouter</button>
        </form>
      </div>
      <ul id="habitList" class="list grid"></ul>
    </section>

    <!-- FOCUS / POMODORO -->
    <section id="focus" class="tab" aria-label="Focus">
      <h2 class="section-title">Focus</h2>
      <div class="focus-panel glass">
        <div class="timer" id="focusTimer">25:00</div>
        <div class="row">
          <button id="focusStart" class="btn primary">Démarrer</button>
          <button id="focusStop" class="btn">Stop</button>
          <button id="focusReset" class="btn">Reset</button>
        </div>
      </div>
      <ul id="focusStats" class="list"></ul>
    </section>

    <!-- SANTÉ -->
    <section id="metrics" class="tab" aria-label="Santé">
      <h2 class="section-title">Santé</h2>
      <div class="card glass stack">
        <p>Importer Apple Santé (export.xml)</p>
        <input id="healthFile" type="file" accept=".xml">
        <button id="parseHealth" class="btn primary">Analyser</button>
      </div>
      <div id="healthSummary" class="card glass"></div>
    </section>

    <!-- OBJECTIFS -->
    <section id="goals" class="tab" aria-label="Objectifs">
      <h2 class="section-title">Objectifs</h2>
      <form id="goalForm" class="card glass row wrap">
        <input id="goalTitle" placeholder="Objectif">
        <input id="goalTarget" type="number" placeholder="Valeur cible">
        <button class="btn primary">Ajouter</button>
      </form>
      <ul id="goalList" class="list grid"></ul>
    </section>

    <!-- NUTRITION -->
    <section id="nutrition" class="tab" aria-label="Nutrition">
      <h2 class="section-title">Nutrition</h2>
      <form id="nutriForm" class="card glass row wrap">
        <input id="nutriFood" placeholder="Aliment">
        <input id="nutriKcal" type="number" placeholder="kcal">
        <button class="btn primary">Ajouter</button>
      </form>
      <ul id="nutriList" class="list"></ul>
    </section>

    <!-- HUMEUR -->
    <section id="mood" class="tab" aria-label="Humeur">
      <h2 class="section-title">Humeur</h2>
      <div class="card glass row wrap">
        <select id="moodSelect">
          <option>😊 Heureux</option><option>😐 Neutre</option><option>😔 Fatigué</option><option>😡 Stressé</option>
        </select>
        <button id="saveMood" class="btn primary">Enregistrer</button>
      </div>
      <div id="moodHistory" class="card glass"></div>
    </section>

    <!-- ASSISTANT IA -->
    <section id="assistant" class="tab" aria-label="Assistant IA">
      <h2 class="section-title">Assistant IA</h2>
      <div class="card glass stack">
        <textarea id="assistantInput" placeholder="Pose ta question…"></textarea>
        <button id="askAssistant" class="btn primary">Envoyer</button>
      </div>
      <div id="assistantChat" class="chat list"></div>
    </section>

    <!-- CALENDRIER -->
    <section id="calendar" class="tab" aria-label="Calendrier">
      <h2 class="section-title">Calendrier</h2>
      <div id="calendarContainer" class="card glass"></div>
    </section>

    <!-- RESSOURCES & CONNAISSANCES -->
    <section id="resources" class="tab" aria-label="Ressources">
      <h2 class="section-title">Ressources</h2>
      <form id="resourceForm" class="card glass row wrap">
        <input id="resourceTitle" placeholder="Titre">
        <input id="resourceLink" placeholder="Lien">
        <button class="btn primary">Ajouter</button>
      </form>
      <ul id="resourceList" class="list"></ul>
    </section>

    <!-- FICHIERS -->
    <section id="files" class="tab" aria-label="Fichiers">
      <h2 class="section-title">Fichiers</h2>
      <div class="card glass row wrap">
        <input id="fileUpload" type="file" multiple>
        <button id="saveFile" class="btn primary">Uploader</button>
      </div>
      <ul id="fileList" class="list grid"></ul>
    </section>

    <!-- CARTE / GÉO -->
    <section id="map" class="tab" aria-label="Carte">
      <h2 class="section-title">Carte des souvenirs</h2>
      <div id="mapView" class="card glass map-placeholder">🗺️ Carte (à connecter)</div>
    </section>

    <!-- RECHERCHE -->
    <section id="search" class="tab" aria-label="Recherche">
      <h2 class="section-title">Recherche</h2>
      <div class="card glass row">
        <input id="searchInput" placeholder="Rechercher partout…">
        <button id="searchBtn" class="btn">🔎</button>
      </div>
      <div id="searchResults" class="list"></div>
    </section>

    <!-- PARAMÈTRES -->
    <section id="settings" class="tab" aria-label="Paramètres">
      <h2 class="section-title">Paramètres</h2>
      <div class="grid-2">
        <div class="card glass stack">
          <h3>Apparence</h3>
          <button id="themeLight" class="btn">Clair</button>
          <button id="themeDark" class="btn">Sombre</button>
          <button id="themeAmoled" class="btn">AMOLED</button>
        </div>
        <div class="card glass stack">
          <h3>Sauvegarde</h3>
          <button id="exportData" class="btn">Exporter JSON</button>
          <input id="importData" type="file" accept=".json">
        </div>
        <div class="card glass stack">
          <h3>Confidentialité</h3>
          <button id="lockApp" class="btn">Activer verrouillage (Face ID)</button>
          <button id="panicMode" class="btn danger">Mode voyage</button>
        </div>
        <div class="card glass stack">
          <h3>Synchronisation</h3>
          <button id="syncNow" class="btn">Sync manuelle</button>
          <small>Prévu: Supabase/iCloud, Siri Shortcuts, Notifications</small>
        </div>
      </div>
    </section>
  </main>

  <!-- Dock -->
  <nav class="dock glass" role="navigation" aria-label="Navigation principale">
    <button data-tab="dashboard" class="active">🏠<span>Accueil</span></button>
    <button data-tab="journal">📓<span>Journal</span></button>
    <button data-tab="tasks">✅<span>Tâches</span></button>
    <button data-tab="habits">🔥<span>Habitudes</span></button>
    <button data-tab="focus">⏳<span>Focus</span></button>
    <button data-tab="metrics">📊<span>Santé</span></button>
    <button data-tab="goals">🎯<span>Objectifs</span></button>
    <button data-tab="nutrition">🥗<span>Nutrition</span></button>
    <button data-tab="mood">😊<span>Humeur</span></button>
    <button data-tab="assistant">🤖<span>IA</span></button>
    <button data-tab="calendar">📅<span>Agenda</span></button>
    <button data-tab="resources">📚<span>Ressources</span></button>
    <button data-tab="files">📂<span>Fichiers</span></button>
    <button data-tab="map">🗺️<span>Carte</span></button>
    <button data-tab="search">🔍<span>Recherche</span></button>
    <button data-tab="settings">⚙️<span>Réglages</span></button>
  </nav>

</div>

<!-- SW minimal (tu peux remplacer par ton sw.js avancé) -->
<script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('./sw.js').catch(console.error);
  }
</script>
</body>
</html>
